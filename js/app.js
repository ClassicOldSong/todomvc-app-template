!function(){"use strict";"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments,a=this,o=arguments.length;for(n=0;n<o;n++)e=r[n],t.call(a,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array.prototype.indexOf||function(e){for(var t=this,n=0,r=this.length;n<r;n++)if(n in t&&t[n]===e)return n;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},i=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},l=function(e){for(var t=this,n=r.call(e.getAttribute("class")||""),a=n?n.split(/\s+/):[],o=0,i=a.length;o<i;o++)t.push(a[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},s=l.prototype=[],c=function(){return new l(this)};if(o.prototype=Error.prototype,s.item=function(e){return this[e]||null},s.contains=function(e){return e+="",-1!==i(this,e)},s.add=function(){var e,t=this,n=arguments,r=0,a=n.length,o=!1;do{e=n[r]+"",-1===i(t,e)&&(t.push(e),o=!0)}while(++r<a);o&&this._updateClassName()},s.remove=function(){var e,t,n=this,r=arguments,a=0,o=r.length,l=!1;do{for(e=r[a]+"",t=i(n,e);-1!==t;)n.splice(t,1),l=!0,t=i(n,e)}while(++a<o);l&&this._updateClassName()},s.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},s.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",u)}catch(e){-2146823252===e.number&&(u.enumerable=!1,n.defineProperty(t,"classList",u))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self));var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t){!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof t&&t.exports?t.exports=n():e.log=n()}(e,function(){function e(e){return typeof console!==l&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):i)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==l&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=this,r=0;r<s.length;r++){var a=s[r];n[a]=r<e?i:n.methodFactory(a,e,t)}}function a(t,r,a){return e(t)||n.apply(this,arguments)}function o(e,t,n){function o(e){var t=(s[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function i(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===l)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}var c,u=this,d="loglevel";e&&(d+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||a,u.getLevel=function(){return c},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(c=t,!1!==n&&o(t),r.call(u,t,e),typeof console===l&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){i()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var p=i();null==p&&(p=null==t?"WARN":t),u.setLevel(p,!1)}var i=function(){},l="undefined",s=["trace","debug","info","warn","error"],c=new o,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new o(e,c.getLevel(),c.methodFactory)),t};var d=typeof window!==l?window.log:void 0;return c.noConflict=function(){return typeof window!==l&&window.log===c&&(window.log=d),c},c})}),n="[EF]",r=t.getLogger("ef"),a=(r.trace.bind(null,n),r.debug.bind(null,n),r.info.bind(null,n)),o=r.warn.bind(null,n),i=r.error.bind(null,n),l=function(e){return i("Detach the component before attaching it to a new component! Component to be detached:",e)},s=function(){return i("Cannot mount a component to it's child component!")};r.setLevel("error"),a("Debug logging enabled!");var c=new RegExp("\\&[0-7]{1,3}","g"),u=new RegExp("\\&u\\[.*?\\]","g"),d=new RegExp("\\&u.{0,4}","g"),p=new RegExp("\\&x.{0,2}","g"),f=new RegExp("\\&","g"),h=new RegExp("\\&b","g"),v=new RegExp("\\&t","g"),m=new RegExp("\\&n","g"),g=new RegExp("\\&v","g"),b=new RegExp("\\&f","g"),y=new RegExp("\\&r","g"),w=function(){throw new SyntaxError("Octal escape sequences are not allowed in EFML.")},$=function(e){if(e=e.substr(3,e.length-4),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");try{return String.fromCodePoint(e)}catch(e){throw new SyntaxError("Undefined Unicode code-point")}},N=function(e){if(e=e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");return String.fromCharCode(e)},E=function(e){if(e="00"+e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid hexadecimal escape sequence");return String.fromCharCode(e)},k=function(e){for(var t=e.split("&&"),n=[],r=0,a=t;r<a.length;r+=1){var o=a[r],i=o.replace(c,w).replace(u,$).replace(d,N).replace(p,E).replace(h,"\b").replace(v,"\t").replace(m,"\n").replace(g,"\v").replace(b,"\f").replace(y,"\r").replace(f,"");n.push(i)}return n.join("&")},x=k,S=">#%@.-+".split(""),D="attached data element refs methods subscribe unsubscribe update destroy".split(" ").map(function(e){return"$"+e}),T=/^\{\{.*\}\}$/,L=function(e,t){return void 0===t&&(t=-2),"Failed to parse eft template: "+e+". at line "+(t+1)},R=function(e){return!e.replace(/\s/,"")},O=function(e,t){null===t.offset&&(t.offset=e.match(/\s*/)[0],t.offset&&(t.offsetReg=new RegExp("^"+t.offset)))},C=function(e,t,n){if(t.offsetReg){var r=!1;if(e=e.replace(t.offsetReg,function(){return r=!0,""}),!r)throw new SyntaxError(L("Expected indent to be grater than 0 and less than "+(t.prevDepth+1)+", but got -1",n))}return e},_=function(e,t){if(!t.indentReg){var n=e.match(/^(\t*)( *).*/)[2];n&&(t.indentReg=new RegExp(n))}},A=function(e,t,n){var r=0;t.indentReg&&(e=e.replace(/^\s*/,function(e){return e.replace(t.indentReg,"\t")}));var a=e.replace(/^\t*/,function(e){return r=e.length,""});if(/^\s/.test(a))throw new SyntaxError(L("Bad indent",n));return{depth:r,content:a}},j=function(e,t){for(var n=e,r=0;r<t;r++)n=n[n.length-1];return n},I=function(e){e=e.substr(2,e.length-4);var t=e.split("="),n=t[0],r=t.slice(1),a=n.trim().split("."),o=x(r.join("=").trim());return o?[a,o]:[a]},P=function(e){var t=e.split("#"),n=t[0],r=t.slice(1),a=n.split("."),o=a[0],i=a.slice(1),l=i.join(".");return T.test(l)?{tag:o,ref:r.join("#"),class:I(l)}:{tag:o,ref:r.join("#"),class:i.join(" ")}},F=function(e){var t=e.split("="),n=t.shift().trim(),r=t.join("=").trim();return T.test(r)?{name:n,value:I(r)}:{name:n,value:x(r)}},U=function(e){var t=[],n=e.match(/\{\{.+?\}\}/g);if(n)for(var r=e.split(/\{\{.+?\}\}/g),a=0;a<r.length;a++)r[a]&&t.push(x(r[a])),n[a]&&t.push(I(n[a]));else t.push(x(e));return t},q=function(e,t){switch(t){case"stop":e.s=1;break;case"stopImmediate":e.i=1;break;case"prevent":e.p=1;break;case"shift":e.h=1;break;case"alt":e.a=1;break;case"ctrl":e.c=1;break;case"meta":e.t=1;break;case"capture":e.u=1;break;default:console.warn("Abandoned unsupported event option '"+t+"'.")}},M=function(e,t,n){var r=parseInt(n,10);if(isNaN(r))return q(e,n);t.push(r)},B=function(e){var t={},n=[],r=e.split("."),a=r[0],o=r.slice(1);t.l=a;for(var i=0,l=o;i<l.length;i+=1){var s=l[i];M(t,n,s)}return n.length>0&&(t.k=n),t},K=function(e){var t=e.split(":"),n=t[0],r=t.slice(1),a=r.join(":");return a?T.test(a)?[n.trim(),I(a)]:[n.trim(),x(r.join(":"))]:[n.trim()]},G=function(e){var t=e.line,n=e.ast,r=e.parsingInfo,a=e.i;if(!R(t)){_(t,r),O(t,r);var o=A(C(t,r,a),r,a),i=o.depth,l=o.content;if(l){if(i<0||i-r.prevDepth>1||i-r.prevDepth==1&&-1===["comment","tag"].indexOf(r.prevType)||"comment"!==r.prevType&&0===i&&r.topExists)throw new SyntaxError(L("Expected indent to be grater than 0 and less than "+(r.prevDepth+1)+", but got "+i,a));var s=l[0];if(l=l.slice(1),!r.topExists&&S.indexOf(s)>=0&&">"!==s)throw new SyntaxError(L("No top level entry",a));if(!l&&S.indexOf(s)>=0)throw new SyntaxError(L("Empty content",a));switch((i<r.prevDepth||i===r.prevDepth&&"tag"===r.prevType)&&(r.currentNode=j(n,i)),r.prevDepth=i,s){case">":r.topExists||(r.topExists=!0,r.minDepth=i);var c=P(l),u=[{t:c.tag}];c.class&&(u[0].a={},u[0].a.class=c.class),c.ref&&(u[0].r=c.ref),r.currentNode.push(u),r.currentNode=u,r.prevType="tag";break;case"#":var d=F(l),p=d.name,f=d.value;r.currentNode[0].a||(r.currentNode[0].a={}),r.currentNode[0].a[p]=f,r.prevType="attr";break;case"%":var h=F(l),v=h.name,m=h.value;r.currentNode[0].p||(r.currentNode[0].p={}),r.currentNode[0].p[v]=m,r.prevType="prop";break;case"@":var g=F(l),b=g.name,y=g.value;if("string"!=typeof y)throw new SyntaxError(L("Methods should not be wrapped in mustaches",a));r.currentNode[0].e||(r.currentNode[0].e=[]);var w=B(b),$=K(y),N=$[0],E=$[1];w.m=N,E&&(w.v=E),r.currentNode[0].e.push(w),r.prevType="event";break;case".":(k=r.currentNode).push.apply(k,U(l)),r.prevType="text";break;case"-":if(-1!==D.indexOf(l))throw new SyntaxError(L("Reserved name '"+l+"' should not be used",a));r.currentNode.push({n:l,t:0}),r.prevType="node";break;case"+":r.currentNode.push({n:l,t:1}),r.prevType="list";break;default:r.prevType="comment"}}var k}},W=function(e){if(!e)throw new TypeError(L("Template required, but nothing present"));var t=typeof e;if("string"!==t)throw new TypeError(L("Expected a string, but got a(n) "+t));for(var n=e.split(/\r?\n/),r=[],a={indentReg:null,prevDepth:0,offset:null,offsetReg:null,prevType:"comment",currentNode:r,topExists:!1},o=0;o<n.length;o++)G({line:n[o],ast:r,parsingInfo:a,i:o});if(r[0])return r[0];throw new SyntaxError(L("Nothing to be parsed",n.length-1))},J=function(e,t){return t||(t=W),t(e)},Y=Array.prototype,z={copy:function(e){return Y.slice.call(e,0)},empty:function(e){return e.length=0,e},equals:function(e,t){if(!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},pop:function(e){return Y.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Y.push.apply(e,t)},remove:function(e,t){var n=Y.indexOf.call(e,t);if(n>-1)return Y.splice.call(e,n,1),t},reverse:function(e){return Y.reverse.call(e)},shift:function(e){return Y.shift.call(e)},slice:function(e,t,n){return Y.slice.call(e,t,n)},sort:function(e,t){return Y.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Y.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Y.unshift.apply(e,t)}},H=function(e,t){for(var n in t)e[n]=t[n];return e},V=Object.assign||H,X=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n];t[a]||(t[a]={}),t=t[a]}return t},Q=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var a=r[n];if(!t[a]){var o={};Object.defineProperty(t,a,{get:function(){return o},set:function(e){V(o,e)},enumerable:!0})}t=t[a]}return t},Z=function(e){var t=e._path,n=e._key,r=e.parentNode,a=e.subscriberNode,o=e.dataNode;return t.length>0&&(r=Q(t,r),a=X(t,a),o=X(t,o)),a[n]||(a[n]=[]),Object.prototype.hasOwnProperty.call(o,n)||(o[n]=""),{parentNode:r,subscriberNode:a[n],dataNode:o}},ee=function(e,t){var n=e.split("."),r=n.pop();return X(n,t)[r]},te=function(e){var t=e.parentNode,n=e.dataNode,r=e.subscriberNode,a=e.state,o=e._key;Object.defineProperty(t,o,{get:function(){return n[o]},set:function(e){if(n[o]!==e){n[o]=e;for(var t=0,i=r;t<i.length;t+=1){i[t].call(a,e)}}},enumerable:!0})},ne=function(e){var t=e.bind,n=e.state,r=e.subscriber,a=e.innerData,o=e.handler,i=z.copy(t[0]),l=t[1],s=i.pop(),c=Z({_path:i,_key:s,parentNode:n.$data,subscriberNode:r,dataNode:a}),u=c.parentNode,d=c.subscriberNode,p=c.dataNode;return Object.prototype.hasOwnProperty.call(u,s)||te({parentNode:u,dataNode:p,subscriberNode:d,state:n,_key:s}),l&&(u[s]=l),o&&(o(p[s]),d.push(o)),{dataNode:p,subscriberNode:d,_key:s}},re=function(e,t,n){var r=document.createElement(e);return t&&Object.defineProperty(n,t,{value:r,enumerable:!0}),r},ae=function(e){var t=e.dataNode,n=e.subscriberNode,r=e.handler,a=e.state,o=e._key,i=e.value;if(t[o]!==i){t[o]=i;for(var l=0,s=n;l<s.length;l+=1){var c=s[l];c!==r&&c.call(a,i)}}},oe=function(e){var t=e.dataNode,n=e.subscriberNode,r=e.handler,a=e.state,o=e.element,i=e.key,l=e._key,s=function(){return ae({dataNode:t,subscriberNode:n,handler:r,state:a,_key:l,value:o.value})};"value"===i?(o.addEventListener("input",s,!0),o.addEventListener("keyup",s,!0),o.addEventListener("change",s,!0)):o.addEventListener("change",function(){return ae({dataNode:t,subscriberNode:n,handler:r,state:a,_key:l,value:o.checked})},!0)},ie=function(e){var t=e.element,n=e.attr,r=e.key,a=e.state,o=e.subscriber,i=e.innerData;"string"==typeof n?t.setAttribute(r,n):ne({bind:n,state:a,subscriber:o,innerData:i,handler:function(e){return t.setAttribute(r,e)}})},le=function(e){var t=e.element,n=e.prop,r=e.key,a=e.state,o=e.subscriber,i=e.innerData;if("string"==typeof n)t[r]=n;else{var l=function(e){t[r]=e},s=ne({bind:n,state:a,subscriber:o,innerData:i,handler:l}),c=s.dataNode,u=s.subscriberNode,d=s._key;"value"!==r&&"checked"!==r||oe({dataNode:c,subscriberNode:u,handler:l,state:a,element:t,key:r,_key:d})}},se=function(e){var t=e.v,n=e.state,r=e.subscriber,a=e.innerData;return Array.isArray(t)?ne({bind:t,state:n,subscriber:r,innerData:a}):{dataNode:{_:t},_key:"_"}},ce=function(e){var t=e.element,n=e.event,r=e.state,a=e.subscriber,i=e.innerData,l=n.l,s=n.m,c=n.s,u=n.i,d=n.p,p=n.h,f=n.a,h=n.c,v=n.t,m=n.u,g=n.k,b=n.v,y=se({v:b,state:r,subscriber:a,innerData:i}),w=y.dataNode,$=y._key;t.addEventListener(l,function(e){!!p!=!!e.shiftKey||!!f!=!!e.altKey||!!h!=!!e.ctrlKey||!!v!=!!e.metaKey||g&&-1===g.indexOf(e.which)||(c&&e.stopPropagation(),u&&e.stopImmediatePropagation(),d&&e.preventDefault(),r.$methods[s]?r.$methods[s]({e:e,value:w[$],state:r}):o("Method named '"+s+"' not found!"))},!!m)},ue=function(e){var t=e.info,n=e.state,r=e.innerData,a=e.refs,o=e.subscriber,i=t.t,l=t.a,s=t.p,c=t.e,u=t.r,d=re(i,u,a);for(var p in l)ie({element:d,attr:l[p],key:p,state:n,subscriber:o,innerData:r});for(var f in s)le({element:d,prop:s[f],key:f,state:n,subscriber:o,innerData:r});for(var h in c)ce({element:d,event:c[h],state:n,subscriber:o,innerData:r});return d},de=Node.prototype,pe={before:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=document.createDocumentFragment();t.reverse();for(var a=0,o=t;a<o.length;a+=1){var i=o[a];de.appendChild.call(r,i)}de.insertBefore.call(e.parentNode,r,e)},after:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];de.appendChild.call(r,i)}e.nextSibling?de.insertBefore.call(e.parentNode,r,e.nextSibling):de.appendChild.call(e.parentNode,r)},append:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(-1!==[1,9,11].indexOf(e.nodeType)){for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];de.appendChild.call(r,i)}de.appendChild.call(e,r)}},remove:function(e){de.removeChild.call(e.parentNode,e)}},fe={empty:function(){for(var e=this,t=0,n=e;t<n.length;t+=1){var r=n[t];pe.remove(r.$element),r.$destroy()}z.empty(this)},pop:function(){if(0!==this.length){var e=z.pop(this);return pe.remove(e.$element),e}},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=[],a=0,o=t;a<o.length;a+=1){var i=o[a];z.push(r,i.$element)}return 0===this.length?pe.after.apply(pe,[e].concat(r)):pe.after.apply(pe,[this[this.length-1].$element].concat(r)),z.push.apply(z,[this].concat(t))},remove:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=[],a=0,o=t;a<o.length;a+=1){var i=o[a],l=z.remove(e,i);l&&(pe.remove(l.$element),z.push(r,l))}return r},reverse:function(){var e=this;if(0===this.length)return this;var t=document.createTextNode("");pe.before(this[0].$element,t);for(var n=[],r=this.length-1;r>=0;r--)z.push(n,e[r].$element);return pe.after.apply(pe,[t].concat(n)),pe.remove(t),z.reverse(this)},shift:function(){if(0!==this.length){var e=z.shift(this);return pe.remove(e.$element),e}},sort:function(e){var t=this;if(0===this.length)return this;var n=document.createTextNode("");pe.before(this[0].$element,n);for(var r=z.sort(this,e),a=[],o=0,i=t;o<i.length;o+=1){var l=i[o];z.push(a,l.$element)}return pe.after.apply(pe,[n].concat(a)),pe.remove(n),r},splice:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];if(0===this.length)return this;var r=document.createTextNode("");pe.before(this[0].$element,r);for(var a=z.splice.apply(z,[this].concat(t)),o=[],i=0,l=a;i<l.length;i+=1){var s=l[i];pe.remove(s.$element)}for(var c=0,u=e;c<u.length;c+=1){var d=u[c];z.push(o,d.$element)}return pe.after.apply(pe,[r].concat(o)),pe.remove(r),a},unshift:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(0===this.length)return(s=this).push.apply(s,e).length;var n=document.createTextNode("");pe.before(this[0].$element,n);for(var r=[],a=0,o=e;a<o.length;a+=1){var i=o[a];if(i.$attached)return l(i);z.push(r,i.$element)}return pe.after.apply(pe,[n].concat(r)),pe.remove(n),z.unshift.apply(z,[this].concat(e));var s}},he=function(e,t){return Object.defineProperties(e,{empty:{value:fe.empty},pop:{value:fe.pop},push:{value:fe.push.bind(e,t)},remove:{value:fe.remove},reverse:{value:fe.reverse},shift:{value:fe.shift},sort:{value:fe.sort},splice:{value:fe.splice},unshift:{value:fe.unshift}}),e},ve=function(e){return Array.isArray(e)?"array":typeof e},me=function(e){var t=e.node,n=e.state,r=e.subscriber,a=e.innerData,o=e.element,i=document.createTextNode("");ne({bind:t,state:n,subscriber:r,innerData:a,handler:function(e){i.textContent=e}}),pe.append(o,i)},ge=function(e){var t=e.$element,n=e.children,r=e.name,a=e.anchor,o=e.value;if(n[r]!==o){if(o&&(o.$attached&&l(o),o.$element.contains(t)))return s();n[r]&&pe.remove(n[r].$element),o&&pe.after(a,o.$element),n[r]=o}},be=function(e){var t=e.state,n=e.name,r=e.children,a=e.anchor;Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){ge({$element:t.$element,children:r,name:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},ye=function(e){var t=e.$element,n=e.children,r=e.name,a=e.anchor,o=e.value;o=o?z.copy(o):[];var i=document.createDocumentFragment();if(n[r]){for(var l=0,c=o;l<c.length;l+=1){var u=c[l];if(u.$element.contains(t))return s();pe.append(i,u.$element),z.remove(n[r],u)}for(var d=0,p=n[r];d<p.length;d+=1){var f=p[d];pe.remove(f.$element)}}else for(var h=0,v=o;h<v.length;h+=1){var m=v[h];pe.append(i,m.$element)}n[r].length=0,z.push.apply(z,[n[r]].concat(o)),pe.after(a,i)},we=function(e){var t=e.state,n=e.name,r=e.children,a=e.anchor;r[n]=he([],a),Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){r[n]&&z.equals(r[n],e)||ye({$element:t.$element,children:r,name:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},$e=function(e){var t=e.node,n=e.nodeType,r=e.element,a=e.state,o=e.innerData,i=e.refs,l=e.children,s=e.subscriber,c=e.create;switch(n){case"string":pe.append(r,document.createTextNode(t));break;case"array":"object"===ve(t[0])?pe.append(r,c({ast:t,state:a,innerData:o,refs:i,children:l,subscriber:s,create:c})):me({node:t,state:a,subscriber:s,innerData:o,element:r});break;case"object":var u=document.createTextNode("");if(0===t.t)be({state:a,name:t.n,children:l,anchor:u});else{if(1!==t.t)throw new TypeError("Not a standard ef.js AST: Unknown mounting point type '"+t.t+"'");we({state:a,name:t.n,children:l,anchor:u})}pe.append(r,u);break;default:throw new TypeError("Not a standard ef.js AST: Unknown node type '"+n+"'")}},Ne=function(e){for(var t=e.ast,n=e.state,r=e.innerData,a=e.refs,o=e.children,i=e.subscriber,l=e.create,s=ue({info:t[0],state:n,innerData:r,refs:a,subscriber:i}),c=1;c<t.length;c++)$e({node:t[c],nodeType:ve(t[c]),element:s,state:n,innerData:r,refs:a,children:o,subscriber:i,create:l});return s},Ee=function(e,t,n){var r=ee(e,n);-1!==r.indexOf(t)&&z.remove(r,t)},ke=function(){return!!this.$element.parentNode},xe=function(e){var t=V({},e);t.$data&&(V(this.$data,t.$data),delete t.$data),t.$methods&&(V(this.$methods,t.$methods),delete t.$methods),V(this,t)},Se=function(){var e=this;for(var t in e)e[t]=null,delete e[t];delete this.$element,delete this.$data,delete this.$methods,delete this.$refs,delete this.$subscribe,delete this.$unsubscribe,delete this.$attached,delete this.$update,delete this.$destroy},De=function(e){var t={},n={},r={},a={},o={},i={},l={};Object.defineProperties(t,{$data:{get:function(){return a},set:function(e){V(a,e)},configurable:!0},$methods:{get:function(){return i},set:function(e){V(i,e)},configurable:!0},$refs:{value:r,configurable:!0},$subscribe:{value:function(e,n){var r=e.split(".");ne({bind:[r],state:t,subscriber:l,innerData:o,handler:n})},configurable:!0},$unsubscribe:{value:function(e,t){Ee(e,t,l)},configurable:!0},$attached:{get:ke,configurable:!0},$update:{value:xe,configurable:!0},$destroy:{value:Se,configurable:!0}});var s=Ne({ast:e,state:t,innerData:o,refs:r,children:n,subscriber:l,create:Ne});return Object.defineProperty(t,"$element",{value:s,configurable:!0}),t},Te=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r="",a=0;a<t.length;a++)r+=e[a]+t[a];return r+e[e.length-1]},Le=W,Re=function(){function e(e){var t=ve(e);if("string"===t)e=J(e,Le);else if("array"!==t)throw new TypeError("Cannot create new component without proper template or AST!");var n=e;Object.defineProperty(this,"render",{value:function(e){var t=De(n);return e&&t.$update(e),t}})}return e.setPatser=function(e){Le=e},e.parseEft=function(e){return W(e)},e.t=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new e(Te.apply(void 0,t))},e}();a("ef.js v0.1.4-alpha.5.master.7afb0e8 initialized!");var Oe=new Re([{t:"section",a:{class:"todoapp"}},[{t:"header",a:{class:"header"}},[{t:"h1"},"todos"],[{t:"input",a:{class:"new-todo",placeholder:"What needs to be done?",autofocus:""},r:"input",p:{value:[["input"]]},e:[{l:"keypress",p:1,k:[13],m:"addTodo",v:[["input"]]}]}]],{n:"main",t:0},{n:"footer",t:0}]),Ce=new Re([{t:"section",a:{class:"main",style:"display: none;"}},[{t:"input",a:{class:"toggle-all",id:"toggle-all",type:"checkbox"},p:{checked:[["allCompleted"]]}}],[{t:"label",a:{for:"toggle-all"}},"Mark all as complete"],[{t:"ul",a:{class:"todo-list"}},{n:"todos",t:1}]]),_e=new Re([{t:"li",a:{class:"todo"}},[{t:"div",a:{class:"view"}},[{t:"input",a:{class:"toggle",type:"checkbox"},p:{checked:[["completed"]]}}],[{t:"label",e:[{l:"dblclick",m:"edit"}]},[["title"]]],[{t:"button",a:{class:"destroy"},e:[{l:"click",m:"destroy"}]}]],[{t:"input",a:{class:"edit"},r:"edit",p:{value:[["update"]]},e:[{l:"keydown",p:1,k:[13],m:"confirm",v:[["update"]]},{l:"keydown",k:[27],m:"cancle",v:[["title"]]},{l:"blur",m:"confirm",v:[["update"]]}]}]]),Ae=new Re([{t:"footer",a:{class:"footer",style:"display: none;"}},[{t:"span",a:{class:"todo-count"}},[{t:"strong"},[["count"],"0"]]," item",[["s"]]," left"],[{t:"ul",a:{class:"filters"}},[{t:"li"},[{t:"a",a:{class:[["allSelected"]],href:"#/"}},"All"]],[{t:"li"},[{t:"a",a:{class:[["activeSelected"]],href:"#/active"}},"Active"]],[{t:"li"},[{t:"a",a:{class:[["completedSelected"]],href:"#/completed"}},"Completed"]]],[{t:"button",a:{class:"clear-completed",style:"display: none;"},r:"clear",e:[{l:"click",m:"clear"}]},"Clear completed"]]),je=Array.prototype,Ie={copy:function(e){return je.slice.call(e,0)},empty:function(e){return e.length=0,e},equals:function(e,t){if(!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},pop:function(e){return je.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return je.push.apply(e,t)},remove:function(e,t){var n=je.indexOf.call(e,t);if(n>-1)return je.splice.call(e,n,1),t},reverse:function(e){return je.reverse.call(e)},shift:function(e){return je.shift.call(e)},slice:function(e,t,n){return je.slice.call(e,t,n)},sort:function(e,t){return je.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return je.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return je.unshift.apply(e,t)}},Pe=Oe.render(),Fe=Ce.render(),Ue=Ae.render(),qe=0;Pe.main=Fe,Pe.footer=Ue;var Me=[],Be=[],Ke=[],Ge=[],We=function(){localStorage.setItem("todos-ef",JSON.stringify(Ge))},Je=function(e,t){return e.$data.order>t.$data.order?1:-1},Ye=function(e){switch(e){case"#/active":Fe.todos=Me.sort(Je),Ue.$data={allSelected:"",activeSelected:"selected",completedSelected:""};break;case"#/completed":Fe.todos=Be.sort(Je),Ue.$data={allSelected:"",activeSelected:"",completedSelected:"selected"};break;default:Fe.todos=Ke,Ue.$data={allSelected:"selected",activeSelected:"",completedSelected:""}}},ze=function(){0===Ke.length?(Ue.$element.style.display="none",Fe.$element.style.display="none"):(Ue.$element.style.display="block",Fe.$element.style.display="block"),0!==Ke.length&&Ke.length===Be.length?Fe.$data.allCompleted=!0:Fe.$data.allCompleted=!1,0===Be.length?Ue.$refs.clear.style.display="none":Ue.$refs.clear.style.display="block",Ue.$data.count=Me.length,Me.length>1?Ue.$data.s="s":Ue.$data.s=""},He=function(e){if(e)for(var t=Ie.copy(Me),n=0,r=t;n<r.length;n+=1){var a=r[n];a.$data.completed=!0}else if(Be.length===Ke.length)for(var o=Ie.copy(Be),i=0,l=o;i<l.length;i+=1){var s=l[i];s.$data.completed=!1}"#/"!==location.hash&&Ye(location.hash)},Ve=function(){for(var e=0,t=Be;e<t.length;e+=1){var n=t[e];Ie.remove(Ke,n),Ie.remove(Ge,n.$data),Fe.todos.remove(n),n.$destroy()}Be.length=0,ze(),We(),Ye(location.hash)},Xe=function(e){var t=e.state;Ie.remove(Ke,t),Fe.todos.remove(t),Ie.remove(Ge,t.$data),Ie.remove(Me,t),Ie.remove(Be,t),t.$destroy(),ze(),We(),Ye(location.hash)},Qe=function(e){e?(this.$element.classList.add("completed"),Ie.remove(Me,this),Be.push(this),"#/active"===location.hash&&Fe.todos.remove(this)):(this.$element.classList.remove("completed"),Me.push(this),Ie.remove(Be,this),"#/completed"===location.hash&&Fe.todos.remove(this)),ze(),We()},Ze=function(e){var t=e.e,n=e.state,r=e.value,a=r.trim();if(!a)return Xe({state:n});n.$element.classList.remove("editing"),n.$data.title=a,"blur"===t.type&&(n.$data.update=""),We()},et=function(e){var t=e.state,n=e.value;t.$element.classList.remove("editing"),t.$data.update=n},tt=function(e){var t=e.state;t.$element.classList.add("editing"),t.$data.update=t.$data.title,t.$refs.edit.focus()},nt=function(e){e.order=qe+=1,e.completed=!!e.completed;var t=_e.render({$data:e,$methods:{edit:tt,cancle:et,confirm:Ze,destroy:Xe}});Ke.push(t),Ge.push(t.$data),e.completed||"#/completed"===location.hash||Fe.todos.push(t),t.$subscribe("completed",Qe.bind(t)),ze(),We(),Pe.$refs.input.focus()},rt=function(e){var t=e.state,n=e.value;(n=n.trim())&&(t.$data.input="",nt({title:n,completed:!1}))};Pe.$methods.addTodo=rt,Ue.$methods.clear=Ve,Fe.$subscribe("allCompleted",He);var at=localStorage.getItem("todos-ef");if(at)for(var ot=JSON.parse(at),it=0,lt=ot;it<lt.length;it+=1){var st=lt[it];nt(st)}/^#\/(active|completed)?$/.test(location.hash)||(window.location="#/"),Ye(location.hash),window.addEventListener("hashchange",function(){return Ye(location.hash)}),document.querySelector("body").replaceChild(Pe.$element,document.querySelector(".todoapp"))}();
