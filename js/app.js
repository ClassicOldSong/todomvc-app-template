!function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(t){!function(e,n){"function"==typeof define&&define.amd?define(n):"object"==typeof t&&t.exports?t.exports=n():e.log=n()}(e,function(){function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):i)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(r.call(this,t,n),this[e].apply(this,arguments))}}function r(e,t){for(var n=this,r=0;r<l.length;r++){var a=l[r];n[a]=r<e?i:n.methodFactory(a,e,t)}}function a(t,r,a){return e(t)||n.apply(this,arguments)}function o(e,t,n){function o(e){var t=(l[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function i(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}var c,u=this,d="loglevel";e&&(d+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||a,u.getLevel=function(){return c},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(c=t,!1!==n&&o(t),r.call(u,t,e),typeof console===s&&t<u.levels.SILENT)return"No console available for logging"},u.setDefaultLevel=function(e){i()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var p=i();null==p&&(p=null==t?"WARN":t),u.setLevel(p,!1)}var i=function(){},s="undefined",l=["trace","debug","info","warn","error"],c=new o,u={};c.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new o(e,c.getLevel(),c.methodFactory)),t};var d=typeof window!==s?window.log:void 0;return c.noConflict=function(){return typeof window!==s&&window.log===c&&(window.log=d),c},c})}),n="[EF]",r=t.getLogger("ef"),a=(r.trace.bind(null,n),r.debug.bind(null,n),r.info.bind(null,n)),o=r.warn.bind(null,n),i=(r.error.bind(null,n),function(){return o("Better detach the component before attaching it to a new component!")}),s=function(){return o("Cannot mount a component to it's child component!")};r.setLevel("error"),a("Debug logging enabled!");var l=new RegExp("\\&[0-7]{1,3}","g"),c=new RegExp("\\&u\\[.*?\\]","g"),u=new RegExp("\\&u.{0,4}","g"),d=new RegExp("\\&x.{0,2}","g"),p=new RegExp("\\&","g"),f=new RegExp("\\&b","g"),h=new RegExp("\\&t","g"),v=new RegExp("\\&n","g"),m=new RegExp("\\&v","g"),g=new RegExp("\\&f","g"),y=new RegExp("\\&r","g"),b=function(){throw new SyntaxError("Octal escape sequences are not allowed in EFML.")},$=function(e){if(e=e.substr(3,e.length-4),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");try{return String.fromCodePoint(e)}catch(e){throw new SyntaxError("Undefined Unicode code-point")}},w=function(e){if(e=e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid Unicode escape sequence");return String.fromCharCode(e)},N=function(e){if(e="00"+e.substring(2),!(e=parseInt(e,16)))throw new SyntaxError("Invalid hexadecimal escape sequence");return String.fromCharCode(e)},k=function(e){for(var t=e.split("&&"),n=[],r=0,a=t;r<a.length;r+=1){var o=a[r],i=o.replace(l,b).replace(c,$).replace(u,w).replace(d,N).replace(f,"\b").replace(h,"\t").replace(v,"\n").replace(m,"\v").replace(g,"\f").replace(y,"\r").replace(p,"");n.push(i)}return n.join("&")},E=k,x=">#%@.-+".split(""),D="$before $after $parent $key $data $element $refs $methods $mount $umount $subscribe $unsubscribe $update $destroy __DIRECTMOUNT__".split(" "),_=function(e,t){return void 0===t&&(t=-2),"Failed to parse eft template: "+e+". at line "+(t+1)},S=function(e){return!e.replace(/\s/,"")},T=function(e,t){null===t.offset&&(t.offset=e.match(/\s*/)[0],t.offset&&(t.offsetReg=new RegExp("^"+t.offset)))},L=function(e,t,n){if(t.offsetReg){var r=!1;if(e=e.replace(t.offsetReg,function(){return r=!0,""}),!r)throw new SyntaxError(_("Expected indent to be grater than 0 and less than "+(t.prevDepth+1)+", but got -1",n))}return e},R=function(e,t){if(!t.indentReg){var n=e.match(/^(\t*)( *).*/)[2];n&&(t.indentReg=new RegExp(n,"g"))}},C=function(e,t,n){var r=0;t.indentReg&&(e=e.replace(/^\s*/,function(e){return e.replace(t.indentReg,"\t")}));var a=e.replace(/^\t*/,function(e){return r=e.length,""});if(/^\s/.test(a))throw new SyntaxError(_("Bad indent",n));return{depth:r,content:a}},O=function(e,t){for(var n=e,r=0;r<t;r++)n=n[n.length-1];return n},A=function(e){e=e.slice(2,e.length-2);var t=e.split("="),n=t[0],r=t.slice(1),a=n.trim().split("."),o=E(r.join("=").trim());return o?[a,o]:[a]},j=function(e){var t=e.split(/\{\{.+?\}\}/g);if(1===t.length)return E(e);var n=[];2!==t.length||t[0]||t[1]?n.push(t.map(E)):n.push(0);var r=e.match(/\{\{.+?\}\}/g);return r&&n.push.apply(n,r.map(A)),n},I=function(e,t){t&&e.push(t)},U=function(e){var t=j(e);if("string"==typeof t)return[t];for(var n=t[0],r=t.slice(1),a=[],o=0;o<r.length;o++)I(a,n[o]),a.push(r[o]);return I(a,n[n.length-1]),a},q=function(e){return e.replace(/\./g," ")},P=function(e){var t={},n=e.replace(/#([^}]|}[^}])*$/,function(e){return t.ref=e.slice(1),""}).split("."),r=n[0],a=n.slice(1);return t.tag=r,t.class=j(a.join(".")),"string"==typeof t.class?t.class=q(t.class).trim():t.class[0]&&(t.class[0]=t.class[0].map(q)),t},F=function(e){var t=e.split("=");return{name:t.shift().trim(),value:j(t.join("=").trim())}},M=function(e){var t=e.split("=");return{name:t.shift().trim(),value:t.join("=").trim()}},B=function(e,t){switch(t){case"stop":e.s=1;break;case"stopImmediate":e.i=1;break;case"prevent":e.p=1;break;case"shift":e.h=1;break;case"alt":e.a=1;break;case"ctrl":e.c=1;break;case"meta":e.t=1;break;case"capture":e.u=1;break;default:console.warn("Abandoned unsupported event option '"+t+"'.")}},K=function(e,t,n){var r=parseInt(n,10);if(isNaN(r))return B(e,n);t.push(r)},G=function(e){var t={},n=[],r=e.split("."),a=r[0],o=r.slice(1);t.l=a;for(var i=0,s=o;i<s.length;i+=1){var l=s[i];K(t,n,l)}return n.length>0&&(t.k=n),t},W=function(e){var t=e.split(":"),n=t[0],r=t.slice(1),a=r.join(":");return a?[n.trim(),j(a)]:[n.trim()]},J=function(e){var t=e.line,n=e.ast,r=e.parsingInfo,a=e.i;if(!S(t)){R(t,r),T(t,r);var o=C(L(t,r,a),r,a),i=o.depth,s=o.content;if(s){if(i<0||i-r.prevDepth>1||i-r.prevDepth==1&&-1===["comment","tag"].indexOf(r.prevType)||"comment"!==r.prevType&&0===i&&r.topExists)throw new SyntaxError(_("Expected indent to be grater than 0 and less than "+(r.prevDepth+1)+", but got "+i,a));var l=s[0];if(s=s.slice(1),!r.topExists&&x.indexOf(l)>=0&&">"!==l)throw new SyntaxError(_("No top level entry",a));if(!s&&x.indexOf(l)>=0)throw new SyntaxError(_("Empty content",a));switch((i<r.prevDepth||i===r.prevDepth&&"tag"===r.prevType)&&(r.currentNode=O(n,i)),r.prevDepth=i,l){case">":r.topExists||(r.topExists=!0,r.minDepth=i);var c=P(s),u=[{t:c.tag}];c.class&&(u[0].a={},u[0].a.class=c.class),c.ref&&(u[0].r=c.ref),r.currentNode.push(u),r.currentNode=u,r.prevType="tag";break;case"#":var d=F(s),p=d.name,f=d.value;r.currentNode[0].a||(r.currentNode[0].a={}),r.currentNode[0].a[p]=f,r.prevType="attr";break;case"%":var h=F(s),v=h.name,m=h.value;r.currentNode[0].p||(r.currentNode[0].p={}),r.currentNode[0].p[v]=m,r.prevType="prop";break;case"@":var g=M(s),y=g.name,b=g.value;r.currentNode[0].e||(r.currentNode[0].e=[]);var $=G(y),w=W(b),N=w[0],k=w[1];$.m=N,k&&($.v=k),r.currentNode[0].e.push($),r.prevType="event";break;case".":(E=r.currentNode).push.apply(E,U(s)),r.prevType="text";break;case"-":if(-1!==D.indexOf(s))throw new SyntaxError(_("Reserved name '"+s+"' should not be used",a));r.currentNode.push({n:s,t:0}),r.prevType="node";break;case"+":r.currentNode.push({n:s,t:1}),r.prevType="list";break;default:r.prevType="comment"}}var E}},Y=function(e){if(!e)throw new TypeError(_("Template required, but nothing present"));var t=typeof e;if("string"!==t)throw new TypeError(_("Expected a string, but got a(n) "+t));for(var n=e.split(/\r?\n/),r=[],a={indentReg:null,prevDepth:0,offset:null,offsetReg:null,prevType:"comment",currentNode:r,topExists:!1},o=0;o<n.length;o++)J({line:n[o],ast:r,parsingInfo:a,i:o});if(r[0])return r[0];throw new SyntaxError(_("Nothing to be parsed",n.length-1))},z=function(e,t){return t||(t=Y),t(e)},H=Array.prototype,V={copy:function(e){return H.slice.call(e,0)},empty:function(e){return e.length=0,e},equals:function(e,t){if(!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},pop:function(e){return H.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.push.apply(e,t)},remove:function(e,t){var n=H.indexOf.call(e,t);if(n>-1)return H.splice.call(e,n,1),t},reverse:function(e){return H.reverse.call(e)},rightUnique:function(e){for(var t=[],n=0;n<e.length;n++){for(var r=n+1;r<e.length;r++)e[n]===e[r]&&(r=n+=1);t.push(e[n])}return t},shift:function(e){return H.shift.call(e)},slice:function(e,t,n){return H.slice.call(e,t,n)},sort:function(e,t){return H.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return H.unshift.apply(e,t)}};window.Set?V.unique=function(e){return Array.from(new Set(e))}:V.unique=V.rightUnique;var X=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r="",a=0;a<t.length;a++)r+=e[a]+t[a];return r+e[e.length-1]},Q=function(e){return e.dataNode[e._key]},Z=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!e)return Q(t[0]);var r=[e];return r.push.apply(r,t.map(Q)),X.apply(void 0,r)},ee=function(e,t){for(var n in t)e[n]=t[n];return e},te=Object.assign||ee,ne=[],re=[],ae=0,oe=function(e){return ne.push.apply(ne,e)},ie=function(e){return re.push(e)},se=function(){return ae+=1},le=function(e){if(!e&&(ae-=1)>0)return ae;if(ae=0,ne.length>0){for(var t=V.unique(ne),n=0,r=t;n<r.length;n+=1){(0,r[n])()}V.empty(ne)}if(re.length>0){for(var a=V.rightUnique(re),o=0,i=a;o<i.length;o+=1){(0,i[o])()}V.empty(re)}return ae},ce=function(e){for(var t=e._path,n=e.handlers,r=e.subscribers,a=e.innerData,o=0,i=t;o<i.length;o+=1){var s=i[o];n[s]||(n[s]={}),r[s]||(r[s]={}),a[s]||(a[s]={}),n=n[s],r=r[s],a=a[s]}return{handlerNode:n,subscriberNode:r,dataNode:a}},ue=function(e,t,n){for(var r=0,a=e;r<a.length;r+=1){var o=a[r];if(!t[o]){var i={};Object.defineProperty(t,o,{get:function(){return i},set:function(e){se(),te(i,e),le()},configurable:!n,enumerable:n})}t=t[o]}return t},de=function(e){var t=e._path,n=e._key,r=e.data,a=e.handlers,o=e.subscribers,i=e.innerData,s=ue(t,r,!0),l=ce({_path:t,handlers:a,subscribers:o,innerData:i}),c=l.handlerNode,u=l.subscriberNode,d=l.dataNode;return c[n]||(c[n]=[]),u[n]||(u[n]=[]),Object.prototype.hasOwnProperty.call(d,n)||(d[n]=""),{parentNode:s,handlerNode:c[n],subscriberNode:u[n],dataNode:d}},pe=function(e,t){for(var n=e.split("."),r=n.pop(),a=0,o=n;a<o.length;a+=1){var i=o[a];t[i]||(t[i]={}),t=t[i]}return t[r]},fe=function(e){var t=e.parentNode,n=e.dataNode,r=e.handlerNode,a=e.subscriberNode,o=e.state,i=e._key;Object.defineProperty(t,i,{get:function(){return n[i]},set:function(e){if(n[i]!==e){n[i]=e,oe(r),se();for(var t=0,s=a;t<s.length;t+=1){(0,s[t])({state:o,value:e})}le()}},enumerable:!0})},he=function(e){var t=e.bind,n=e.state,r=e.handlers,a=e.subscribers,o=e.innerData,i=V.copy(t[0]),s=t[1],l=i.pop(),c=de({_path:i,_key:l,data:n.$data,handlers:r,subscribers:a,innerData:o}),u=c.parentNode,d=c.handlerNode,p=c.subscriberNode,f=c.dataNode;return Object.prototype.hasOwnProperty.call(u,l)||fe({parentNode:u,dataNode:f,handlerNode:d,subscriberNode:p,state:n,_key:l}),s&&(u[l]=s),{dataNode:f,handlerNode:d,subscriberNode:p,_key:l}},ve=function(e,t,n){var r=document.createElement(e);return t&&Object.defineProperty(n,t,{value:r,enumerable:!0}),r},me=function(e){var t=e.val,n=e.state,r=e.handlers,a=e.subscribers,o=e.innerData,i=e.handler;if(Array.isArray(t)){var s=t[0],l=t.slice(1),c=[s],u=function(){return i(Z.apply(void 0,c))};return c.push.apply(c,l.map(function(e){var t=he({bind:e,state:n,handlers:r,subscribers:a,innerData:o}),i=t.dataNode,s=t.handlerNode,l=t._key;return s.push(u),{dataNode:i,_key:l}})),u}return function(){return t}},ge=function(e){var t=e.dataNode,n=e.handlerNode,r=e.subscriberNode,a=e._handler,o=e.state,i=e._key,s=e.value;if(t[i]!==s){t[i]=s;var l=V.copy(n);V.remove(l,a),oe(l),se();for(var c=0,u=r;c<u.length;c+=1){(0,u[c])({state:o,value:s})}le()}},ye=function(e){var t=e._handler,n=e.state,r=e.handlers,a=e.subscribers,o=e.innerData,i=e.element,s=e.key,l=e.expr,c=he({bind:l,state:n,handlers:r,subscribers:a,innerData:o}),u=c.dataNode,d=c.handlerNode,p=c.subscriberNode,f=c._key,h=function(){return ge({dataNode:u,handlerNode:d,subscriberNode:p,_handler:t,state:n,_key:f,value:i.value})};"value"===s?(i.addEventListener("input",h,!0),i.addEventListener("keyup",h,!0),i.addEventListener("change",h,!0)):i.addEventListener("change",function(){return ge({dataNode:u,handlerNode:d,subscriberNode:p,_handler:t,state:n,_key:f,value:i.checked})},!0)},be=function(e,t){return"class"===t?function(n){n=n.replace(/\s+/g," ").trim(),e.setAttribute(t,n)}:function(n){return e.setAttribute(t,n)}},$e=function(e){var t=e.element,n=e.attr,r=e.key,a=e.state,o=e.handlers,i=e.subscribers,s=e.innerData;if("string"==typeof n)t.setAttribute(r,n);else{var l=be(t,r);oe([me({val:n,state:a,handlers:o,subscribers:i,innerData:s,handler:l})])}},we=function(e){var t=e.element,n=e.prop,r=e.key,a=e.state,o=e.handlers,i=e.subscribers,s=e.innerData;if("string"==typeof n)t[r]=n;else{var l=function(e){t[r]=e},c=me({val:n,state:a,handlers:o,subscribers:i,innerData:s,handler:l});"value"!==r&&"checked"!==r||n[0]||ye({_handler:c,state:a,handlers:o,subscribers:i,innerData:s,element:t,key:r,expr:n[1]}),oe([c])}},Ne=function(e){return e},ke=function(e){var t=e.element,n=e.event,r=e.state,a=e.handlers,i=e.subscribers,s=e.innerData,l=n.l,c=n.m,u=n.s,d=n.i,p=n.p,f=n.h,h=n.a,v=n.c,m=n.t,g=n.u,y=n.k,b=n.v,$=me({val:b,state:r,handlers:a,subscribers:i,innerData:s,handler:Ne});t.addEventListener(l,function(e){!!f!=!!e.shiftKey||!!h!=!!e.altKey||!!v!=!!e.ctrlKey||!!m!=!!e.metaKey||y&&-1===y.indexOf(e.which)||(u&&e.stopPropagation(),d&&e.stopImmediatePropagation(),p&&e.preventDefault(),r.$methods[c]?r.$methods[c]({e:e,value:$(),state:r}):o("Method named '"+c+"' not found!"))},!!g)},Ee=function(e){var t=e.info,n=e.state,r=e.innerData,a=e.refs,o=e.handlers,i=e.subscribers,s=t.t,l=t.a,c=t.p,u=t.e,d=t.r,p=ve(s,d,a);for(var f in l)$e({element:p,attr:l[f],key:f,state:n,handlers:o,subscribers:i,innerData:r});for(var h in c)we({element:p,prop:c[h],key:h,state:n,handlers:o,subscribers:i,innerData:r});for(var v in u)ke({element:p,event:u[v],state:n,handlers:o,subscribers:i,innerData:r});return p},xe=Node.prototype,De={before:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=document.createDocumentFragment();t.reverse();for(var a=0,o=t;a<o.length;a+=1){var i=o[a];xe.appendChild.call(r,i)}xe.insertBefore.call(e.parentNode,r,e)},after:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];xe.appendChild.call(r,i)}e.nextSibling?xe.insertBefore.call(e.parentNode,r,e.nextSibling):xe.appendChild.call(e.parentNode,r)},append:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(-1!==[1,9,11].indexOf(e.nodeType)){for(var r=document.createDocumentFragment(),a=0,o=t;a<o.length;a+=1){var i=o[a];xe.appendChild.call(r,i)}xe.appendChild.call(e,r)}},remove:function(e){xe.removeChild.call(e.parentNode,e)}},_e={empty:function(){var e=V.copy(this);se();for(var t=0,n=e;t<n.length;t+=1){n[t].$destroy()}le(),V.empty(this)},pop:function(){if(0!==this.length){var e=V.pop(this);return e.$umount(),e}},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=e.state,a=e.key,o=e.anchor,i=[];se();for(var s=0,l=t;s<l.length;s+=1){var c=l[s];V.push(i,c.$mount(r,a))}return 0===this.length?De.after.apply(De,[o].concat(i)):De.after.apply(De,[this[this.length-1].$after].concat(i)),le(),V.push.apply(V,[this].concat(t))},remove:function(){for(var e=this,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=[];se();for(var a=0,o=t;a<o.length;a+=1){var i=o[a],s=V.remove(e,i);i.$umount(),s&&V.push(r,s)}return le(),r},reverse:function(e){var t=this,n=e.state,r=e.key;if(0===this.length)return this;var a=document.createTextNode("");De.before(this[0].$before,a);var o=[];se();for(var i=this.length-1;i>=0;i--)V.push(o,t[i].$mount(n,r));return De.after.apply(De,[a].concat(o)),De.remove(a),le(),V.reverse(this)},shift:function(){if(0!==this.length){var e=V.shift(this);return e.$umount(),e}},sort:function(e,t){var n=this,r=e.state,a=e.key;if(0===this.length)return this;var o=document.createTextNode("");De.before(this[0].$before,o);var i=V.sort(this,t),s=[];se();for(var l=0,c=n;l<c.length;l+=1){var u=c[l];V.push(s,u.$mount(r,a))}return De.after.apply(De,[o].concat(s)),De.remove(o),le(),i},splice:function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var a=e.state,o=e.key;if(0===this.length)return this;var i=document.createTextNode("");De.before(this[0].$before,i);var s=V.splice.apply(V,[this].concat(n)),l=[];se();for(var c=0,u=s;c<u.length;c+=1){u[c].$umount()}for(var d=0,p=t;d<p.length;d+=1){var f=p[d];V.push(l,f.$mount(a,o))}return De.after.apply(De,[i].concat(l)),De.remove(i),le(),s},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=e.state,a=e.key;if(0===this.length)return(d=this).push.apply(d,t).length;var o=document.createTextNode("");De.before(this[0].$before,o);var s=[];se();for(var l=0,c=t;l<c.length;l+=1){var u=c[l];if(u.$parent)return i();V.push(s,u.$mount(r,a))}return De.after.apply(De,[o].concat(s)),De.remove(o),le(),V.unshift.apply(V,[this].concat(t));var d}},Se=function(e,t){return Object.defineProperties(e,{empty:{value:_e.empty},pop:{value:_e.pop},push:{value:_e.push.bind(e,t)},remove:{value:_e.remove},reverse:{value:_e.reverse.bind(e,t)},shift:{value:_e.shift},sort:{value:_e.sort.bind(e,t)},splice:{value:_e.splice.bind(e,t)},unshift:{value:_e.unshift.bind(e,t)}}),e},Te=function(e){return Array.isArray(e)?"array":typeof e},Le=function(e){var t=e.node,n=e.state,r=e.handlers,a=e.subscribers,o=e.innerData,i=e.element,s=document.createTextNode(""),l=he({bind:t,state:n,handlers:r,subscribers:a,innerData:o}),c=l.dataNode,u=l.handlerNode,d=l._key,p=function(){s.textContent=c[d]};u.push(p),oe([p]),De.append(i,s)},Re=function(e){var t=e.state,n=e.children,r=e.key,a=e.anchor,o=e.value;if(n[r]!==o){if(o&&(o.$parent&&i(),o.$element.contains(t.$element)))return s();n[r]&&n[r].$umount(),n[r]=o,o&&o.$mount(t,r,a)}},Ce=function(e){var t=e.state,n=e.key,r=e.children,a=e.anchor;Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){Re({state:t,children:r,key:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},Oe=function(e){var t=e.state,n=e.children,r=e.key,a=e.anchor,o=e.value;o=o?V.copy(o):[];var i=document.createDocumentFragment();if(se(),n[r]){for(var l=0,c=o;l<c.length;l+=1){var u=c[l];if(u.$element.contains(t.$element))return s();u.$umount(),De.append(i,u.$mount(t,r))}for(var d=0,p=V.copy(n[r]);d<p.length;d+=1){p[d].$umount()}}else for(var f=0,h=o;f<h.length;f+=1){var v=h[f];De.append(i,v.$mount(t,r))}n[r].length=0,V.push.apply(V,[n[r]].concat(o)),De.after(a,i),le()},Ae=function(e){var t=e.state,n=e.key,r=e.children,a=e.anchor;r[n]=Se([],{state:t,key:n,anchor:a}),Object.defineProperty(t,n,{get:function(){return r[n]},set:function(e){r[n]&&V.equals(r[n],e)||Oe({state:t,children:r,key:n,anchor:a,value:e})},enumerable:!0,configurable:!0})},je=function(e){var t=e.node,n=e.nodeType,r=e.element,a=e.state,o=e.innerData,i=e.refs,s=e.children,l=e.handlers,c=e.subscribers,u=e.create;switch(n){case"string":De.append(r,document.createTextNode(t));break;case"array":"object"===Te(t[0])?De.append(r,u({ast:t,state:a,innerData:o,refs:i,children:s,handlers:l,subscribers:c,create:u})):Le({node:t,state:a,handlers:l,subscribers:c,innerData:o,element:r});break;case"object":var d=document.createTextNode("");if(0===t.t)Ce({state:a,key:t.n,children:s,anchor:d});else{if(1!==t.t)throw new TypeError("Not a standard ef.js AST: Unknown mounting point type '"+t.t+"'");Ae({state:a,key:t.n,children:s,anchor:d})}De.append(r,d);break;default:throw new TypeError("Not a standard ef.js AST: Unknown node type '"+n+"'")}},Ie=function(e){for(var t=e.ast,n=e.state,r=e.innerData,a=e.refs,o=e.children,i=e.handlers,s=e.subscribers,l=e.create,c=Ee({info:t[0],state:n,innerData:r,refs:a,handlers:i,subscribers:s}),u=1;u<t.length;u++)je({node:t[u],nodeType:Te(t[u]),element:c,state:n,innerData:r,refs:a,children:o,handlers:i,subscribers:s,create:l});return c},Ue=function(e,t,n){var r=e.split("."),a=pe(r,n);V.remove(a,t)},qe=function(e){se();var t=te({},e);t.$data&&(te(this.$data,t.$data),delete t.$data),t.$methods&&(te(this.$methods,t.$methods),delete t.$methods),te(this,t),le()},Pe=function(){var e=this,t=this,n=t.$element,r=t.$after,a=t.$before;se(),this.$umount();for(var o in e)e[o]=null,delete e[o];return ie(function(){De.remove(n),De.remove(r),De.remove(a)}),delete this.$element,delete this.$before,delete this.$after,delete this.$parent,delete this.$key,delete this.$data,delete this.$methods,delete this.$refs,delete this.$mount,delete this.$umount,delete this.$subscribe,delete this.$unsubscribe,le()},Fe=function(){function e(e){var t=this,n={},r={},a={},i={},s={},l={},c={before:document.createTextNode(""),after:document.createTextNode(""),parent:null,key:null},u=document.createDocumentFragment(),d=function(){return De.after(c.before,c.element)};Object.defineProperties(this,{$element:{get:function(){return c.element},configurable:!0},$before:{get:function(){return c.before},configurable:!0},$after:{get:function(){return c.after},configurable:!0},$parent:{get:function(){return c.parent},configurable:!0},$key:{get:function(){return c.key},configurable:!0},$methods:{get:function(){return i},set:function(e){te(i,e)},configurable:!0},$refs:{value:r,configurable:!0},$mount:{value:function(e,t,n){return"string"==typeof e&&(e=document.querySelector(e),t="__DIRECTMOUNT__"),se(),c.parent&&(this.$umount(),o("Component detached from previous mounting point.")),c.parent=e,c.key=t,De.append(u,c.before),De.append(u,c.after),ie(d),e instanceof Element?(De.append(e,u),le()):n?(De.after(n,u),le()):(le(),u)},configurable:!0},$umount:{value:function(){var e=c.parent,t=c.key;return c.parent=null,c.key=null,e&&"__DIRECTMOUNT__"!==t&&e[t]?void(Array.isArray(e[t])?e[t].remove(this):e[t]=null):(De.append(u,c.before),De.append(u,c.after),se(),ie(d),le())},configurable:!0},$subscribe:{value:function(e,n){var r=e.split("."),o=he({bind:[r],state:t,handlers:s,subscribers:l,innerData:a}),i=o.dataNode,c=o.subscriberNode,u=o._key;n({state:t,value:i[u]}),c.push(n)},configurable:!0},$unsubscribe:{value:function(e,t){Ue(e,t,l)},configurable:!0}}),ue(["$data"],this,!1),c.element=Ie({ast:e,state:this,innerData:a,refs:r,children:n,handlers:s,subscribers:l,create:Ie})}return e}();Object.defineProperties(Fe.prototype,{$update:{value:qe},$destroy:{value:Pe}});var Me=Y,Be=function(e){var t=Te(e);if("string"===t)e=z(e,Me);else if("array"!==t)throw new TypeError("Cannot create new component without proper template or AST!");var n=e;return function(e){function t(t){se(),e.call(this,n),t&&this.$update(t),le()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Fe)};a("ef.js v0.3.0-alpha.6 initialized!"),"document"in window.self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,r=arguments,a=this,o=arguments.length;for(n=0;n<o;n++)e=r[n],t.call(a,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}e=null}():function(e){if("Element"in e){var t=e.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array.prototype.indexOf||function(e){for(var t=this,n=0,r=this.length;n<r;n++)if(n in t&&t[n]===e)return n;return-1},o=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},i=function(e,t){if(""===t)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},s=function(e){for(var t=this,n=r.call(e.getAttribute("class")||""),a=n?n.split(/\s+/):[],o=0,i=a.length;o<i;o++)t.push(a[o]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},l=s.prototype=[],c=function(){return new s(this)};if(o.prototype=Error.prototype,l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",-1!==i(this,e)},l.add=function(){var e,t=this,n=arguments,r=0,a=n.length,o=!1;do{e=n[r]+"",-1===i(t,e)&&(t.push(e),o=!0)}while(++r<a);o&&this._updateClassName()},l.remove=function(){var e,t,n=this,r=arguments,a=0,o=r.length,s=!1;do{for(e=r[a]+"",t=i(n,e);-1!==t;)n.splice(t,1),s=!0,t=i(n,e)}while(++a<o);s&&this._updateClassName()},l.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},l.toString=function(){return this.join(" ")},n.defineProperty){var u={get:c,enumerable:!0,configurable:!0};try{n.defineProperty(t,"classList",u)}catch(e){-2146823252===e.number&&(u.enumerable=!1,n.defineProperty(t,"classList",u))}}else n.prototype.__defineGetter__&&t.__defineGetter__("classList",c)}}(window.self));var Ke=Be([{t:"section",a:{class:"todoapp"}},[{t:"header",a:{class:"header"}},[{t:"h1"},"todos"],[{t:"input",a:{class:"new-todo",placeholder:"What needs to be done?",autofocus:""},r:"input",p:{value:[0,[["input"]]]},e:[{l:"keypress",p:1,k:[13],m:"addTodo",v:[0,[["input"]]]}]}]],{n:"main",t:0},{n:"footer",t:0}]),Ge=Be([{t:"section",a:{class:"main",style:"display: none;"}},[{t:"input",a:{class:"toggle-all",id:"toggle-all",type:"checkbox"},p:{checked:[0,[["allCompleted"]]]}}],[{t:"label",a:{for:"toggle-all"}},"Mark all as complete"],[{t:"ul",a:{class:"todo-list"}},{n:"todos",t:1}]]),We=Be([{t:"li",a:{class:"todo"}},[{t:"div",a:{class:"view"}},[{t:"input",a:{class:"toggle",type:"checkbox"},p:{checked:[0,[["completed"]]]}}],[{t:"label",e:[{l:"dblclick",m:"edit"}]},[["title"]]],[{t:"button",a:{class:"destroy"},e:[{l:"click",m:"destroy"}]}]],[{t:"input",a:{class:"edit"},r:"edit",p:{value:[0,[["update"]]]},e:[{l:"keydown",p:1,k:[13],m:"blur"},{l:"keydown",k:[27],m:"cancel",v:[0,[["title"]]]},{l:"blur",m:"confirm",v:[0,[["update"]]]}]}]]),Je=Be([{t:"footer",a:{class:"footer",style:"display: none;"}},[{t:"span",a:{class:"todo-count"}},[{t:"strong"},[["count"],"0"]]," item",[["s"]]," left"],[{t:"ul",a:{class:"filters"}},[{t:"li"},[{t:"a",a:{class:[0,[["allSelected"]]],href:"#/"}},"All"]],[{t:"li"},[{t:"a",a:{class:[0,[["activeSelected"]]],href:"#/active"}},"Active"]],[{t:"li"},[{t:"a",a:{class:[0,[["completedSelected"]]],href:"#/completed"}},"Completed"]]],[{t:"button",a:{class:"clear-completed",style:"display: none;"},r:"clear",e:[{l:"click",m:"clear"}]},"Clear completed"]]),Ye=Array.prototype,ze={copy:function(e){return Ye.slice.call(e,0)},empty:function(e){return e.length=0,e},equals:function(e,t){if(!Array.isArray(t))return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},pop:function(e){return Ye.pop.call(e)},push:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ye.push.apply(e,t)},remove:function(e,t){var n=Ye.indexOf.call(e,t);if(n>-1)return Ye.splice.call(e,n,1),t},reverse:function(e){return Ye.reverse.call(e)},shift:function(e){return Ye.shift.call(e)},slice:function(e,t,n){return Ye.slice.call(e,t,n)},sort:function(e,t){return Ye.sort.call(e,t)},splice:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ye.splice.apply(e,t)},unshift:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return Ye.unshift.apply(e,t)}},He=new Ke,Ve=new Ge,Xe=new Je,Qe=0;He.main=Ve,He.footer=Xe;var Ze=[],et=[],tt=[],nt=[],rt=function(){localStorage.setItem("todos-ef",JSON.stringify(nt))},at=function(e,t){return e.$data.order>t.$data.order?1:-1},ot=function(e){switch(se(),e){case"#/active":Ve.todos=Ze.sort(at),Xe.$data={allSelected:"",activeSelected:"selected",completedSelected:""},le();break;case"#/completed":Ve.todos=et.sort(at),Xe.$data={allSelected:"",activeSelected:"",completedSelected:"selected"},le();break;default:Ve.todos=tt,Xe.$data={allSelected:"selected",activeSelected:"",completedSelected:""},le()}},it=function(){0===tt.length?(Xe.$element.style.display="none",Ve.$element.style.display="none"):(Xe.$element.style.display="block",Ve.$element.style.display="block"),0!==tt.length&&tt.length===et.length?Ve.$data.allCompleted=!0:Ve.$data.allCompleted=!1,0===et.length?Xe.$refs.clear.style.display="none":Xe.$refs.clear.style.display="block",Xe.$data.count=Ze.length,Ze.length>1?Xe.$data.s="s":Xe.$data.s=""},st=function(e){var t=e.value;if(se(),t)for(var n=ze.copy(Ze),r=0,a=n;r<a.length;r+=1){var o=a[r];o.$data.completed=!0}else if(et.length===tt.length)for(var i=ze.copy(et),s=0,l=i;s<l.length;s+=1){var c=l[s];c.$data.completed=!1}"#/"!==location.hash&&ot(location.hash),le()},lt=function(){se();for(var e=0,t=et;e<t.length;e+=1){var n=t[e];ze.remove(tt,n),ze.remove(nt,n.$data),Ve.todos.remove(n),n.$destroy()}et.length=0,it(),rt(),ot(location.hash),le()},ct=function(e){var t=e.state;se(),ze.remove(tt,t),ze.remove(nt,t.$data),ze.remove(et,t),t.$destroy(),it(),rt(),ot(location.hash),le()},ut=function(e){var t=e.value;se(),t?(this.$element.classList.add("completed"),ze.remove(Ze,this),et.push(this),"#/active"===location.hash&&Ve.todos.remove(this)):(this.$element.classList.remove("completed"),Ze.push(this),ze.remove(et,this),"#/completed"===location.hash&&Ve.todos.remove(this)),it(),rt(),le()},dt=function(e){var t=e.e,n=e.state,r=e.value;se();var a=r.trim();if(!a)return le(ct({state:n}));n.$element.classList.remove("editing"),n.$data.title=a,"blur"===t.type&&(n.$data.update=""),rt(),le()},pt=function(e){var t=e.state,n=e.value;se(),t.$element.classList.remove("editing"),t.$data.update=n,le()},ft=function(e){var t=e.state;se(),t.$element.classList.add("editing"),t.$data.update=t.$data.title,t.$refs.edit.focus(),le()},ht=function(e){e.state.$refs.edit.blur()},vt=function(e){e.order=Qe+=1,e.completed=!!e.completed;var t=new We({$data:e,$methods:{blur:ht,edit:ft,cancel:pt,confirm:dt,destroy:ct}});tt.push(t),nt.push(t.$data),e.completed||"#/completed"===location.hash||Ve.todos.push(t),t.$subscribe("completed",ut.bind(t)),it(),rt(),He.$refs.input.focus()},mt=function(e){var t=e.state,n=e.value;n=n.trim(),se(),n&&(t.$data.input="",vt({title:n,completed:!1}),le())};He.$methods.addTodo=mt,Xe.$methods.clear=lt,Ve.$subscribe("allCompleted",st)
;var gt=localStorage.getItem("todos-ef");if(gt)for(var yt=JSON.parse(gt),bt=0,$t=yt;bt<$t.length;bt+=1){var wt=$t[bt];vt(wt)}/^#\/(active|completed)?$/.test(location.hash)||(window.location="#/"),ot(location.hash),window.addEventListener("hashchange",function(){return ot(location.hash)}),document.querySelector("body").replaceChild(He.$element,document.querySelector(".todoapp"))}();
